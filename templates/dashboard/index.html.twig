{% extends 'base.html.twig' %}

{% block title %}Dashboard - Skincare Admin{% endblock %}

{% block body %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

{% set currentRoute = app.request.attributes.get('_route') %}

<style>


/* DASHBOARD CARDS */
.dashboard-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
    gap: 25px;
    margin-top: 30px;
}
.card {
    background: #fff;
    border-radius: 12px;
    padding: 25px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    box-shadow: 0 3px 10px rgba(0,0,0,0.05);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}
.card:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 12px rgba(0,0,0,0.08);
}
.card i {
    font-size: 28px;
    color: var(--color-olive);
    margin-bottom: 10px;
}
.card h3 {
    margin: 0;
    font-size: 22px;
    color: var(--color-olive);
}
.card p {
    font-size: 18px;
    font-weight: 600;
    margin: 5px 0;
}
.card small {
    color: #777;
}

/* TABLE */
.section-title {
    font-size: 22px;
    margin: 40px 0 15px;
    color: var(--color-olive);
    font-weight: 600;
}
.recent-table {
    width: 100%;
    border-collapse: collapse;
    background: #fff;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
}
.recent-table th, .recent-table td {
    padding: 12px 15px;
    border-bottom: 1px solid #eee;
    text-align: left;
}
.recent-table th {
    background: var(--color-olive);
    color: #fff;
    font-weight: 600;
}
.recent-table tr:hover { background: #f8f8f8; }

/* Customer Ratings Card */
.card {
  background: #fff;
  border-radius: 12px;
  padding: 20px;
  margin-top: 20px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.05);
}

.section-title {
  color: #6b705c;
  font-weight: 600;
  margin-bottom: 15px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.ratings-container {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.ratings-summary {
  font-size: 1.2rem;
  color: #333;
}

.average-rating {
  font-size: 2.5rem;
  font-weight: bold;
  color: #b79b7f; /* gold tone */
}

.out-of {
  color: #777;
}

.review-count {
  color: #888;
  margin-left: 5px;
}

.rating-bars {
  margin-top: 10px;
}

.rating-row {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 6px;
  font-size: 0.95rem;
}

.rating-bar {
  flex: 1;
  height: 8px;
  background: #e5e5e5;
  border-radius: 6px;
  overflow: hidden;
}

.rating-fill {
  height: 8px;
  background: #b79b7f;
  border-radius: 6px;
}

</style>




    <!-- KPI CARDS -->
    <div class="dashboard-cards">
        <div class="card">
            <i class="fas fa-dollar-sign"></i>
            <h3>Sales</h3>
            <p>₱25,970</p>
            <small>Last 24 hours</small>
        </div>
        <div class="card">
            <i class="fas fa-shopping-cart"></i>
            <h3>Orders</h3>
            <p>{{ totalOrders }}</p>
            <small>Total Orders</small>
        </div>
        <div class="card">
            <i class="fas fa-box"></i>
            <h3>Products</h3>
            <p>{{ totalProducts }}</p>
            <small>Total Products</small>
        </div>
    </div>

    <!-- RECENT ORDERS -->
    <h2 class="section-title"><i class="fas fa-box-open"></i> Recent Orders</h2>
    <table class="recent-table">
        <thead>
            <tr>
                <th>#</th>
                <th>Customer</th>
                <th>Status</th>
                <th>Date</th>
            </tr>
        </thead>
        <tbody>
            {% for order in recentOrders %}
                <tr>
                    <td>{{ order.id }}</td>
                    <td>{{ order.customerName ?? 'N/A' }}</td>
                    <td>{{ order.status ?? 'Pending' }}</td>
                    <td>{{ order.createdAt|date('Y-m-d H:i') }}</td>
                </tr>
            {% else %}
                <tr><td colspan="4" style="text-align:center;">No orders yet.</td></tr>
            {% endfor %}
        </tbody>
    </table>
    <!-- CUSTOMER RATINGS -->
<div class="card mt-4">
    <h2 class="section-title"><i class="fas fa-star"></i> Customer Ratings</h2>
    <div class="ratings-container">
        <div class="ratings-summary">
            <span class="average-rating">4.8</span>
            <span class="out-of">/ 5.0</span>
            <span class="review-count">(256 reviews)</span>
        </div>

        <div class="rating-bars">
            <div class="rating-row">
                <span>5 ★</span>
                <div class="rating-bar">
                    <div class="rating-fill" style="width: 80%;"></div>
                </div>
                <span>80%</span>
            </div>
            <div class="rating-row">
                <span>4 ★</span>
                <div class="rating-bar">
                    <div class="rating-fill" style="width: 15%;"></div>
                </div>
                <span>15%</span>
            </div>
            <div class="rating-row">
                <span>3 ★</span>
                <div class="rating-bar">
                    <div class="rating-fill" style="width: 4%;"></div>
                </div>
                <span>4%</span>
            </div>
            <div class="rating-row">
                <span>2 ★</span>
                <div class="rating-bar">
                    <div class="rating-fill" style="width: 1%;"></div>
                </div>
                <span>1%</span>
            </div>
            <div class="rating-row">
                <span>1 ★</span>
                <div class="rating-bar">
                    <div class="rating-fill" style="width: 0%;"></div>
                </div>
                <span>0%</span>
            </div>
        </div>
    </div>
</div>

</div>
{% endblock %}
